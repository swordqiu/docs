---
title: "网络"
date: 2021-06-25T10:53:20+08:00
weight: 20
---

## 概念

早先，Cloudpods的私有云平台支持经典网络。云平台的经典网络与数据中心的基础设施网络之间是同级关系，因此，使用经典网络的一个优势是虚机与基础设施其它部分的互连互通相对简便。另外，使用经典网络时，在实施前需要做好网段规划，一方面避免与已有地址段重叠，一方面留足余量用于扩容。在具体的实施阶段，可能需要在物理的交换机、路由器上为经典网络配置网关等参数。

从3.1版本开始，Cloudpods开始支持VPC网络。VPC也叫“虚拟专用网络”，在同一套网络基础设施上可以虚拟出多个VPC网络。VPC之间、VPC与基础设施网络之间是相互隔离的，可以有各自的地址分配空间，配置各自的网关、路由等。由于这种相互隔离的特点，VPC的使用非常敏捷，增删非常容易。如果仅是一个个隔离的网络孤岛，VPC的用途是受限的，我们可以通过部署EIP网关，让VPC可以与外界互通。

上面提到了经典网络与其它VPC是相互隔离的，Cloudpods平台在实际处理时把经典网络也当作一个特殊的VPC看待。在系统初始化时，平台会创建一个标识符为`default`的VPC表示经典网络。

此外，还有如下与VPC相关的网络概念

 - 二层网络（Wire），有时也叫广播域。作为一个逻辑概念，Wire一般对应基础设施中划分的网络区域。例如，宿主机可能有多块网卡分别接入管理网、业务网、存储网络，此时就可以为这三个二层网络在平台中分别创建Wire。
 - 子网（Network）。子网用来描述网段信息，如起始、终止地址，子网网关，子网中的DNS服务器等。

从模型设计上，VPC与二层网络是一对多的关系。具体来说，经典网络VPC可以对应多个二层网络，例如，经典网络中可以有管理网、业务网等二层网络的划分。对于普通VPC来说，通常只对应一个二层网络，因此在使用VPC时通常不将二层网络考虑在内。

二层网络与子网的关系。二层网络是子网的属性，一个二层网络中可以有多个子网。

	      1:n           1:n
	VPC -------> Wire -------> Network
